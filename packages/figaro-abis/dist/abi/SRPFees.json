{"abi":[{"type":"constructor","inputs":[{"name":"_treasury","type":"address","internalType":"address"},{"name":"_feeBps","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"MAX_FEE_BPS","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"acceptTreasury","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"calculateFee","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"cancelTreasuryProposal","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"collectFee","inputs":[{"name":"token","type":"address","internalType":"address"},{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"feeAmount","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"feeBps","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"pendingTreasury","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"proposeTreasury","inputs":[{"name":"newTreasury","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setFeeBps","inputs":[{"name":"newFeeBps","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"treasury","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"event","name":"FeeCollected","inputs":[{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"payer","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"FeeUpdated","inputs":[{"name":"newFeeBps","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"TreasuryProposalCancelled","inputs":[{"name":"treasury","type":"address","indexed":true,"internalType":"address"},{"name":"cancelledProposal","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"TreasuryProposed","inputs":[{"name":"currentTreasury","type":"address","indexed":true,"internalType":"address"},{"name":"proposedTreasury","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"TreasuryUpdated","inputs":[{"name":"newTreasury","type":"address","indexed":false,"internalType":"address"}],"anonymous":false},{"type":"error","name":"AddressEmptyCode","inputs":[{"name":"target","type":"address","internalType":"address"}]},{"type":"error","name":"AddressInsufficientBalance","inputs":[{"name":"account","type":"address","internalType":"address"}]},{"type":"error","name":"FailedInnerCall","inputs":[]},{"type":"error","name":"FeeTooHigh","inputs":[]},{"type":"error","name":"OnlyPendingTreasury","inputs":[]},{"type":"error","name":"OnlyTreasury","inputs":[]},{"type":"error","name":"SafeERC20FailedOperation","inputs":[{"name":"token","type":"address","internalType":"address"}]},{"type":"error","name":"ZeroAddress","inputs":[]}],"bytecode":{"object":"0x60803460a257601f61068c38819003918201601f19168301916001600160401b0383118484101760a657808492604094855283398101031260a25780516001600160a01b038116919082900360a25760200151908015609357605a8211608457600180546001600160a01b0319169190911790555f556040516105d190816100bb8239f35b63cd4e616760e01b5f5260045ffd5b63d92e233d60e01b5f5260045ffd5b5f80fd5b634e487b7160e01b5f52604160045260245ffdfe6080806040526004361015610012575f80fd5b5f3560e01c90816324a9d853146104c5575080632ec0ff6c146103185780632ed6b75d146102f057806361d027b3146102c857806372c27b621461025a57806399a5d7471461022e578063d55be8c614610213578063d920b5ef146101ad578063e49d2a30146101225763f110ed671461008a575f80fd5b3461011e57602036600319011261011e576100a36104de565b6001546001600160a01b0316903382900361010f576001600160a01b031690811561010057600280546001600160a01b031916831790557f9745945724579b0c42c077e39e88287155952650b2dbb9fde023042588ca24575f80a3005b63d92e233d60e01b5f5260045ffd5b632298d39d60e11b5f5260045ffd5b5f80fd5b3461011e575f36600319011261011e576002546001600160a01b038116330361019e57336bffffffffffffffffffffffff60a01b60015416176001556bffffffffffffffffffffffff60a01b166002557f7dae230f18360d76a040c81f050aa14eb9d6dc7901b20fc5d855e2a20fe814d16020604051338152a1005b63d41fc54960e01b5f5260045ffd5b3461011e575f36600319011261011e576001546001600160a01b03163381900361010f57600280546001600160a01b031981169091556001600160a01b0316907f3431482f1a8d9b3035fcd77bc8093e0f23cb2a094de85092bae0e540b5208b975f80a3005b3461011e575f36600319011261011e576020604051605a8152f35b3461011e57602036600319011261011e5760206127106102515f546004356104f4565b04604051908152f35b3461011e57602036600319011261011e57600154600435906001600160a01b0316330361010f57605a81116102b9576020817f8c4d35e54a3f2ef1134138fd8ea3daee6a3c89e10d2665996babdf70261e2c76925f55604051908152a1005b63cd4e616760e01b5f5260045ffd5b3461011e575f36600319011261011e576001546040516001600160a01b039091168152602090f35b3461011e575f36600319011261011e576002546040516001600160a01b039091168152602090f35b3461011e57604036600319011261011e576001600160a01b036103396104de565b168015610480576127106103505f546024356104f4565b048061038e575b602091604051908282527f36119f4f28ae3384ed31589f21ec2992cb0ebe53b11c79a24466ee74471764ed843393a3604051908152f35b5f8060018060a01b036001541660405160208101916323b872dd60e01b83523360248301526044820152846064820152606481526103cd60848261051b565b519082865af13d15610474573d67ffffffffffffffff81116104605761041591604051916104056020601f19601f840116018461051b565b82523d5f602084013e5b8461053d565b805190811515918261043c575b5050156103575750635274afe760e01b5f5260045260245ffd5b819250906020918101031261011e576020015180159081150361011e578380610422565b634e487b7160e01b5f52604160045260245ffd5b6104159060609061040f565b60405162461bcd60e51b815260206004820152601b60248201527f557365205745544820666f7220455448206f7065726174696f6e7300000000006044820152606490fd5b3461011e575f36600319011261011e576020905f548152f35b600435906001600160a01b038216820361011e57565b8181029291811591840414171561050757565b634e487b7160e01b5f52601160045260245ffd5b90601f8019910116810190811067ffffffffffffffff82111761046057604052565b90610561575080511561055257805190602001fd5b630a12f52160e11b5f5260045ffd5b81511580610592575b610572575090565b639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b50803b1561056a56fea264697066735822122012451e052ecdb4e09ad4a1092463efccc7281427af0e54dbb33f6c9ae8e48a7464736f6c634300081e0033","sourceMap":"535:9779:8:-:0;;;;;;;;;;;;;-1:-1:-1;;535:9779:8;;;;-1:-1:-1;;;;;535:9779:8;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;535:9779:8;;;;;;;;;;;;1456:23;;;1452:49;;943:2;1515:21;;1511:46;;535:9779;943:2;;-1:-1:-1;;;;;;943:2:8;;;;;;;-1:-1:-1;943:2:8;535:9779;;;;;;;;;1511:46;1545:12;;;-1:-1:-1;1545:12:8;;-1:-1:-1;1545:12:8;1452:49;1488:13;;;-1:-1:-1;1488:13:8;;-1:-1:-1;1488:13:8;535:9779;-1:-1:-1;535:9779:8;;;;;;-1:-1:-1;535:9779:8;;;;;-1:-1:-1;535:9779:8","linkReferences":{}},"deployedBytecode":{"object":"0x6080806040526004361015610012575f80fd5b5f3560e01c90816324a9d853146104c5575080632ec0ff6c146103185780632ed6b75d146102f057806361d027b3146102c857806372c27b621461025a57806399a5d7471461022e578063d55be8c614610213578063d920b5ef146101ad578063e49d2a30146101225763f110ed671461008a575f80fd5b3461011e57602036600319011261011e576100a36104de565b6001546001600160a01b0316903382900361010f576001600160a01b031690811561010057600280546001600160a01b031916831790557f9745945724579b0c42c077e39e88287155952650b2dbb9fde023042588ca24575f80a3005b63d92e233d60e01b5f5260045ffd5b632298d39d60e11b5f5260045ffd5b5f80fd5b3461011e575f36600319011261011e576002546001600160a01b038116330361019e57336bffffffffffffffffffffffff60a01b60015416176001556bffffffffffffffffffffffff60a01b166002557f7dae230f18360d76a040c81f050aa14eb9d6dc7901b20fc5d855e2a20fe814d16020604051338152a1005b63d41fc54960e01b5f5260045ffd5b3461011e575f36600319011261011e576001546001600160a01b03163381900361010f57600280546001600160a01b031981169091556001600160a01b0316907f3431482f1a8d9b3035fcd77bc8093e0f23cb2a094de85092bae0e540b5208b975f80a3005b3461011e575f36600319011261011e576020604051605a8152f35b3461011e57602036600319011261011e5760206127106102515f546004356104f4565b04604051908152f35b3461011e57602036600319011261011e57600154600435906001600160a01b0316330361010f57605a81116102b9576020817f8c4d35e54a3f2ef1134138fd8ea3daee6a3c89e10d2665996babdf70261e2c76925f55604051908152a1005b63cd4e616760e01b5f5260045ffd5b3461011e575f36600319011261011e576001546040516001600160a01b039091168152602090f35b3461011e575f36600319011261011e576002546040516001600160a01b039091168152602090f35b3461011e57604036600319011261011e576001600160a01b036103396104de565b168015610480576127106103505f546024356104f4565b048061038e575b602091604051908282527f36119f4f28ae3384ed31589f21ec2992cb0ebe53b11c79a24466ee74471764ed843393a3604051908152f35b5f8060018060a01b036001541660405160208101916323b872dd60e01b83523360248301526044820152846064820152606481526103cd60848261051b565b519082865af13d15610474573d67ffffffffffffffff81116104605761041591604051916104056020601f19601f840116018461051b565b82523d5f602084013e5b8461053d565b805190811515918261043c575b5050156103575750635274afe760e01b5f5260045260245ffd5b819250906020918101031261011e576020015180159081150361011e578380610422565b634e487b7160e01b5f52604160045260245ffd5b6104159060609061040f565b60405162461bcd60e51b815260206004820152601b60248201527f557365205745544820666f7220455448206f7065726174696f6e7300000000006044820152606490fd5b3461011e575f36600319011261011e576020905f548152f35b600435906001600160a01b038216820361011e57565b8181029291811591840414171561050757565b634e487b7160e01b5f52601160045260245ffd5b90601f8019910116810190811067ffffffffffffffff82111761046057604052565b90610561575080511561055257805190602001fd5b630a12f52160e11b5f5260045ffd5b81511580610592575b610572575090565b639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b50803b1561056a56fea264697066735822122012451e052ecdb4e09ad4a1092463efccc7281427af0e54dbb33f6c9ae8e48a7464736f6c634300081e0033","sourceMap":"535:9779:8:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;535:9779:8;;;;;;:::i;:::-;;;-1:-1:-1;;;;;535:9779:8;;4657:10;:22;;;4653:49;;-1:-1:-1;;;;;535:9779:8;;4716:25;;4712:51;;4773:29;535:9779;;-1:-1:-1;;;;;;535:9779:8;;;;;4817:39;-1:-1:-1;;4817:39:8;535:9779;4712:51;4750:13;;;535:9779;4750:13;535:9779;;4750:13;4653:49;3200:14;;;535:9779;4688:14;535:9779;;4688:14;535:9779;;;;;;;;;;-1:-1:-1;;535:9779:8;;;;6089:15;535:9779;-1:-1:-1;;;;;535:9779:8;;6075:10;:29;6071:63;;6075:10;535:9779;;;6144:21;535:9779;;;6144:21;535:9779;;;;;6089:15;535:9779;6218:25;535:9779;;;6075:10;535:9779;;6218:25;535:9779;6071:63;6113:21;;;535:9779;6113:21;535:9779;;6113:21;535:9779;;;;;;-1:-1:-1;;535:9779:8;;;;;;-1:-1:-1;;;;;535:9779:8;7341:10;:22;;;7337:49;;7416:15;535:9779;;-1:-1:-1;;;;;;535:9779:8;;;;;-1:-1:-1;;;;;535:9779:8;;7484:46;-1:-1:-1;;7484:46:8;535:9779;;;;;;;-1:-1:-1;;535:9779:8;;;;;;;943:2;535:9779;;;;;;;;;-1:-1:-1;;535:9779:8;;;;;10300:5;10281:15;535:9779;;;;10281:15;:::i;:::-;535:9779;;;;;;;;;;;;;-1:-1:-1;;535:9779:8;;;;;;;;;-1:-1:-1;;;;;535:9779:8;3169:10;:22;3165:49;;943:2;3228:23;;3224:48;;535:9779;;3315:21;535:9779;;;;;;;;3315:21;535:9779;3224:48;3260:12;;;535:9779;3260:12;535:9779;;3260:12;535:9779;;;;;;-1:-1:-1;;535:9779:8;;;;;;;;-1:-1:-1;;;;;535:9779:8;;;;;;;;;;;;;;-1:-1:-1;;535:9779:8;;;;988:30;535:9779;;;-1:-1:-1;;;;;535:9779:8;;;;;;;;;;;;;;-1:-1:-1;;535:9779:8;;;;-1:-1:-1;;;;;535:9779:8;;:::i;:::-;;9033:19;;535:9779;;9126:5;9107:15;535:9779;;;;9107:15;:::i;:::-;535:9779;9145:13;9141:107;;535:9779;;;;;;;;;9262:42;9293:10;;9262:42;;535:9779;;;;;;9141:107;535:9779;;;;;;;;;;;;;1829:53:2;;535:9779:8;;;;1829:53:2;;9205:10:8;535:9779;1829:53:2;;535:9779:8;;;;;;;;;;;1829:53:2;;;;;;:::i;:::-;3462:31:3;;;;;;535:9779:8;;;;;;;;;;3510:55:3;535:9779:8;;;1829:53:2;535:9779:8;;1829:53:2;;535:9779:8;;;;;;;:::i;:::-;;;;;;;;;;3510:55:3;;:::i;:::-;535:9779:8;;4551:22:2;;;;:57;;;;535:9779:8;4547:135:2;;;9141:107:8;4547:135:2;4631:40;;;;535:9779:8;4631:40:2;535:9779:8;;;;4631:40:2;4551:57;4578:30;;;;535:9779:8;4578:30:2;;;535:9779:8;;;;;4578:30:2;535:9779:8;;;;;;;;;4551:57:2;;;;535:9779:8;;;;;;;;;;;;;3510:55:3;535:9779:8;;;;;;;;-1:-1:-1;;;535:9779:8;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;535:9779:8;;;;;;;;;;;;;;;-1:-1:-1;;;;;535:9779:8;;;;;;:::o;:::-;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;1829:53:2;;535:9779:8;;;;;;;;;;;;;;;;:::o;4625:582:3:-;;4797:8;;-1:-1:-1;535:9779:8;;5874:21:3;:17;;6046:142;;;;;;5870:383;6225:17;;;5894:1;6225:17;;5894:1;6225:17;4793:408;535:9779:8;;5045:22:3;:49;;;4793:408;5041:119;;5173:17;;:::o;5041:119::-;-1:-1:-1;;;5066:1:3;5121:24;;;-1:-1:-1;;;;;535:9779:8;;;;5121:24:3;535:9779:8;;;5121:24:3;5045:49;5071:18;;;:23;5045:49;","linkReferences":{}},"methodIdentifiers":{"MAX_FEE_BPS()":"d55be8c6","acceptTreasury()":"e49d2a30","calculateFee(uint256)":"99a5d747","cancelTreasuryProposal()":"d920b5ef","collectFee(address,uint256)":"2ec0ff6c","feeBps()":"24a9d853","pendingTreasury()":"2ed6b75d","proposeTreasury(address)":"f110ed67","setFeeBps(uint256)":"72c27b62","treasury()":"61d027b3"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_treasury\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_feeBps\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"AddressEmptyCode\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"AddressInsufficientBalance\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FailedInnerCall\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FeeTooHigh\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OnlyPendingTreasury\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OnlyTreasury\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"SafeERC20FailedOperation\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAddress\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"}],\"name\":\"FeeCollected\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newFeeBps\",\"type\":\"uint256\"}],\"name\":\"FeeUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"treasury\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"cancelledProposal\",\"type\":\"address\"}],\"name\":\"TreasuryProposalCancelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"currentTreasury\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"proposedTreasury\",\"type\":\"address\"}],\"name\":\"TreasuryProposed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"newTreasury\",\"type\":\"address\"}],\"name\":\"TreasuryUpdated\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"MAX_FEE_BPS\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"acceptTreasury\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"calculateFee\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"cancelTreasuryProposal\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"collectFee\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"feeAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feeBps\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"pendingTreasury\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newTreasury\",\"type\":\"address\"}],\"name\":\"proposeTreasury\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"newFeeBps\",\"type\":\"uint256\"}],\"name\":\"setFeeBps\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"treasury\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"This contract facilitates fee collection from Figaro.sol to treasury via approve/transferFrom pattern.      Design rationale: Maintains treasury control, fee rate flexibility, and gas efficiency.\",\"errors\":{\"AddressEmptyCode(address)\":[{\"details\":\"There's no code at `target` (it is not a contract).\"}],\"AddressInsufficientBalance(address)\":[{\"details\":\"The ETH balance of the account is not enough to perform the operation.\"}],\"FailedInnerCall()\":[{\"details\":\"A call to an address target failed. The target may have reverted.\"}],\"SafeERC20FailedOperation(address)\":[{\"details\":\"An operation with an ERC20 token failed.\"}]},\"kind\":\"dev\",\"methods\":{\"acceptTreasury()\":{\"details\":\"**Pending treasury only.** Step 2 of two-step treasury transfer.      Accept ownership proposed by current treasury. This completes the transfer.      **Security:** By calling this function, you prove:      1. You control the proposed address (can sign transactions)      2. Address can execute protocol operations (not bricked contract)      3. Implicit: If you're a contract, your ERC20 receive logic works      **Side Effects:**      - treasury = msg.sender (you become active treasury)      - pendingTreasury = address(0) (clears proposal state)      - TreasuryUpdated event emitted      **Access Control:** Only address in pendingTreasury can call.      Check current proposal: SRPFees.pendingTreasury()      **Failed Transaction Causes:**      - Not the pending treasury (revert: OnlyPendingTreasury)      - No pending proposal (pendingTreasury == address(0))No parameters or return values. Completes two-step treasury transfer.\"},\"calculateFee(uint256)\":{\"details\":\"**View function.** Pure calculation: (amount \\u00d7 feeBps) / 10000.      Governors use this to preview fees before adjusting feeBps.      **Governance Use Case:**      Before calling setFeeBps(newRate), governors can:      1. Query calculateFee(typicalCollateral) with current feeBps      2. Simulate new fee: (typicalCollateral \\u00d7 newRate) / 10000      3. Compare impact: newFee vs oldFee      4. Decide if fee change is appropriate      **Access Control:** Public view (anyone can query).      No state changes, no transaction costs (pure calculation).\",\"params\":{\"amount\":\"The collateral amount to calculate fee for (in token base units)\"},\"returns\":{\"_0\":\"The calculated fee amount (in same units as input)\"}},\"cancelTreasuryProposal()\":{\"details\":\"**Current treasury only.** Revoke a pending treasury proposal.      Clears pendingTreasury state without changing current treasury.      **Use Cases:**      - Typo in proposed address \\u2192 cancel and repropose correct address      - Pending treasury never accepts \\u2192 cancel and try different address      - Change of governance plans \\u2192 cancel and keep current treasury      **Side Effects:**      - pendingTreasury = address(0) (clears proposal)      - treasury unchanged (you remain active treasury)      - TreasuryProposalCancelled event emitted      **Access Control:** Only current treasury can cancel.This does not change the current treasury.      Only affects the pending proposal. Current treasury remains in control.No parameters or return values. Clears `pendingTreasury` without changing `treasury`.\"},\"collectFee(address,uint256)\":{\"details\":\"Transfers fee from msg.sender to treasury via ERC20 approval.      This is the core fee collection mechanism - Figaro approves SRPFees for fee amount,      then calls collectFee() which pulls tokens directly to treasury.      **Security:** Uses SafeERC20.safeTransferFrom for token transfer.      Protects against non-standard ERC20 implementations (no return value, etc).      **Treasury Revenue Tracking:**      - FeeCollected event emitted for every fee (even if zero)      - Off-chain indexers can track total protocol revenue by token      - Governors can query historical fee collection via event logs      **Access Control:** Any address can call.      Caller must have pre-approved this contract for feeAmount.      **Failed Transaction Causes:**      - Insufficient allowance (caller didn't approve SRPFees)      - Insufficient balance (caller doesn't have feeAmount)      - Invalid token address (token == address(0))\",\"params\":{\"amount\":\"The base amount (fee calculated as amount \\u00d7 feeBps / 10000)\",\"token\":\"The ERC20 token address to collect fee in\"},\"returns\":{\"feeAmount\":\"The actual fee collected and transferred to treasury\"}},\"proposeTreasury(address)\":{\"details\":\"**Current treasury only.** Step 1 of two-step treasury transfer.      Propose a new treasury address. New treasury must call acceptTreasury() to complete transfer.      **Security Rationale (Two-Step Pattern):**      Problem: Single-step setTreasury(address) could brick protocol if:      - Typo in address (wrong EOA, can't sign)      - Contract without ERC20 receive logic (collectFee() reverts forever)      - Multisig with incorrect threshold (can't execute transactions)      Solution: New treasury must prove it can:      1. Sign transactions (call acceptTreasury())      2. Receive ERC20 transfers (acceptTreasury() success implies valid address)      **Workflow:**      1. Current treasury: proposeTreasury(0xNEW) \\u2192 sets pendingTreasury      2. New treasury: acceptTreasury() \\u2192 completes transfer, clears pending      3. If mistake: cancelTreasuryProposal() \\u2192 clears pending, try again      **Access Control:** Only current treasury can propose.\",\"params\":{\"newTreasury\":\"The proposed new treasury address\"}},\"setFeeBps(uint256)\":{\"details\":\"**Treasury only.** Change the fee charged on collateral deposits.      Fee applies to all new SRP creations (existing SRPs unaffected by changes).      **Hard Cap:** 90 BPS (0.9%) enforced by MAX_FEE_BPS constant.      No governance vote can exceed this limit (prevents platform capture).      Attempts to set above 90 BPS revert with FeeTooHigh error.      **Current Default:** 30 BPS (0.3%) \\u2192 3\\u00d7 lower than typical 0.9% crypto platforms.      **Access Control:** Only current treasury can call. No timelock, immediate effect.      Ensures treasury can respond to market conditions or protocol sustainability needs.      **Governance Philosophy:**      Fee funds protocol maintenance (audits, infrastructure, development), not profit extraction.      Treasury can lower fees as adoption scales (economies of scale).      Hard cap prevents future governance from extracting platform rents.      **Side Effects:**      - Updates feeBps state variable (affects all future collectFee() calls)      - Emits FeeUpdated event for off-chain tracking      - Existing SRPs unaffected      - No timelock delay (immediate effect on new SRPs)\",\"params\":{\"newFeeBps\":\"New fee in basis points (0-90 BPS, enforced by MAX_FEE_BPS)\"}}},\"title\":\"SRPFees\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"acceptTreasury()\":{\"notice\":\"Accept treasury role (step 2 of 2)\"},\"calculateFee(uint256)\":{\"notice\":\"Calculate protocol fee for a given collateral amount\"},\"cancelTreasuryProposal()\":{\"notice\":\"Cancel pending treasury proposal\"},\"collectFee(address,uint256)\":{\"notice\":\"Collect protocol fee from caller and transfer to treasury\"},\"proposeTreasury(address)\":{\"notice\":\"Propose a new treasury address (step 1 of 2)\"},\"setFeeBps(uint256)\":{\"notice\":\"Adjust protocol fee in basis points (treasury governance)\"}},\"notice\":\"Handles protocol fee logic and treasury management.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/SRPFees.sol\":\"SRPFees\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\"],\"viaIR\":true},\"sources\":{\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0ea104e577e63faea3b69c415637e99e755dcbf64c5833d7140c35a714d6d90c\",\"dweb:/ipfs/Qmau6x4Ns9XdyynRCNNp3RhLqijJjFm7z5fyZazfYFGYdq\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/extensions/IERC20Permit.sol\":{\"keccak256\":\"0x6008dabfe393240d73d7dd7688033f72740d570aa422254d29a7dce8568f3aff\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f5196ec75139918c6c7bb4251b36395e668f1fa6d206beba7e7520e74913940d\",\"dweb:/ipfs/QmSyqjksXxmm2mCG6qRd1yuwLykypkSVBbnBnGqJRcuJMi\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol\":{\"keccak256\":\"0x37bb49513c49c87c4642a891b13b63571bc87013dde806617aa1efb54605f386\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b3036b3a83b7c48f96641f2a9002b9f2dcb6a5958dd670894ada21ae8229b3d0\",\"dweb:/ipfs/QmUNfSBdoVtjhETaUJCYcaC7pTMgbhht926tJ2uXJbiVd3\"]},\"lib/openzeppelin-contracts/contracts/utils/Address.sol\":{\"keccak256\":\"0xaf28a975a78550e45f65e559a3ad6a5ad43b9b8a37366999abd1b7084eb70721\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b7bd24e224f67f65bfadf85dc2929fa965456bb2415478bd0125471b5ce35245\",\"dweb:/ipfs/QmRaydGr8BTHs1kvaZfsNU69pKzUAGFrvABn1KiRSbE51y\"]},\"src/SRPFees.sol\":{\"keccak256\":\"0xc78e50c2ebdd14ae6c6291998b26856225dc564875b8c5087d98291f16374716\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://1c67a5772c872a3f6c33d5ee232ff37cfb24261d6c61a49f1d51f06ab13e5a60\",\"dweb:/ipfs/QmT1qqFVSbbhGM2JjqcuZ9XHLLs3WJ4DJ9W9yqqLDLfAGA\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.30+commit.73712a01"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_treasury","type":"address"},{"internalType":"uint256","name":"_feeBps","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"target","type":"address"}],"type":"error","name":"AddressEmptyCode"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"type":"error","name":"AddressInsufficientBalance"},{"inputs":[],"type":"error","name":"FailedInnerCall"},{"inputs":[],"type":"error","name":"FeeTooHigh"},{"inputs":[],"type":"error","name":"OnlyPendingTreasury"},{"inputs":[],"type":"error","name":"OnlyTreasury"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"type":"error","name":"SafeERC20FailedOperation"},{"inputs":[],"type":"error","name":"ZeroAddress"},{"inputs":[{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false},{"internalType":"address","name":"payer","type":"address","indexed":true}],"type":"event","name":"FeeCollected","anonymous":false},{"inputs":[{"internalType":"uint256","name":"newFeeBps","type":"uint256","indexed":false}],"type":"event","name":"FeeUpdated","anonymous":false},{"inputs":[{"internalType":"address","name":"treasury","type":"address","indexed":true},{"internalType":"address","name":"cancelledProposal","type":"address","indexed":true}],"type":"event","name":"TreasuryProposalCancelled","anonymous":false},{"inputs":[{"internalType":"address","name":"currentTreasury","type":"address","indexed":true},{"internalType":"address","name":"proposedTreasury","type":"address","indexed":true}],"type":"event","name":"TreasuryProposed","anonymous":false},{"inputs":[{"internalType":"address","name":"newTreasury","type":"address","indexed":false}],"type":"event","name":"TreasuryUpdated","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"MAX_FEE_BPS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"acceptTreasury"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"view","type":"function","name":"calculateFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"cancelTreasuryProposal"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"collectFee","outputs":[{"internalType":"uint256","name":"feeAmount","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"feeBps","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"pendingTreasury","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"address","name":"newTreasury","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"proposeTreasury"},{"inputs":[{"internalType":"uint256","name":"newFeeBps","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setFeeBps"},{"inputs":[],"stateMutability":"view","type":"function","name":"treasury","outputs":[{"internalType":"address","name":"","type":"address"}]}],"devdoc":{"kind":"dev","methods":{"acceptTreasury()":{"details":"**Pending treasury only.** Step 2 of two-step treasury transfer.      Accept ownership proposed by current treasury. This completes the transfer.      **Security:** By calling this function, you prove:      1. You control the proposed address (can sign transactions)      2. Address can execute protocol operations (not bricked contract)      3. Implicit: If you're a contract, your ERC20 receive logic works      **Side Effects:**      - treasury = msg.sender (you become active treasury)      - pendingTreasury = address(0) (clears proposal state)      - TreasuryUpdated event emitted      **Access Control:** Only address in pendingTreasury can call.      Check current proposal: SRPFees.pendingTreasury()      **Failed Transaction Causes:**      - Not the pending treasury (revert: OnlyPendingTreasury)      - No pending proposal (pendingTreasury == address(0))No parameters or return values. Completes two-step treasury transfer."},"calculateFee(uint256)":{"details":"**View function.** Pure calculation: (amount × feeBps) / 10000.      Governors use this to preview fees before adjusting feeBps.      **Governance Use Case:**      Before calling setFeeBps(newRate), governors can:      1. Query calculateFee(typicalCollateral) with current feeBps      2. Simulate new fee: (typicalCollateral × newRate) / 10000      3. Compare impact: newFee vs oldFee      4. Decide if fee change is appropriate      **Access Control:** Public view (anyone can query).      No state changes, no transaction costs (pure calculation).","params":{"amount":"The collateral amount to calculate fee for (in token base units)"},"returns":{"_0":"The calculated fee amount (in same units as input)"}},"cancelTreasuryProposal()":{"details":"**Current treasury only.** Revoke a pending treasury proposal.      Clears pendingTreasury state without changing current treasury.      **Use Cases:**      - Typo in proposed address → cancel and repropose correct address      - Pending treasury never accepts → cancel and try different address      - Change of governance plans → cancel and keep current treasury      **Side Effects:**      - pendingTreasury = address(0) (clears proposal)      - treasury unchanged (you remain active treasury)      - TreasuryProposalCancelled event emitted      **Access Control:** Only current treasury can cancel.This does not change the current treasury.      Only affects the pending proposal. Current treasury remains in control.No parameters or return values. Clears `pendingTreasury` without changing `treasury`."},"collectFee(address,uint256)":{"details":"Transfers fee from msg.sender to treasury via ERC20 approval.      This is the core fee collection mechanism - Figaro approves SRPFees for fee amount,      then calls collectFee() which pulls tokens directly to treasury.      **Security:** Uses SafeERC20.safeTransferFrom for token transfer.      Protects against non-standard ERC20 implementations (no return value, etc).      **Treasury Revenue Tracking:**      - FeeCollected event emitted for every fee (even if zero)      - Off-chain indexers can track total protocol revenue by token      - Governors can query historical fee collection via event logs      **Access Control:** Any address can call.      Caller must have pre-approved this contract for feeAmount.      **Failed Transaction Causes:**      - Insufficient allowance (caller didn't approve SRPFees)      - Insufficient balance (caller doesn't have feeAmount)      - Invalid token address (token == address(0))","params":{"amount":"The base amount (fee calculated as amount × feeBps / 10000)","token":"The ERC20 token address to collect fee in"},"returns":{"feeAmount":"The actual fee collected and transferred to treasury"}},"proposeTreasury(address)":{"details":"**Current treasury only.** Step 1 of two-step treasury transfer.      Propose a new treasury address. New treasury must call acceptTreasury() to complete transfer.      **Security Rationale (Two-Step Pattern):**      Problem: Single-step setTreasury(address) could brick protocol if:      - Typo in address (wrong EOA, can't sign)      - Contract without ERC20 receive logic (collectFee() reverts forever)      - Multisig with incorrect threshold (can't execute transactions)      Solution: New treasury must prove it can:      1. Sign transactions (call acceptTreasury())      2. Receive ERC20 transfers (acceptTreasury() success implies valid address)      **Workflow:**      1. Current treasury: proposeTreasury(0xNEW) → sets pendingTreasury      2. New treasury: acceptTreasury() → completes transfer, clears pending      3. If mistake: cancelTreasuryProposal() → clears pending, try again      **Access Control:** Only current treasury can propose.","params":{"newTreasury":"The proposed new treasury address"}},"setFeeBps(uint256)":{"details":"**Treasury only.** Change the fee charged on collateral deposits.      Fee applies to all new SRP creations (existing SRPs unaffected by changes).      **Hard Cap:** 90 BPS (0.9%) enforced by MAX_FEE_BPS constant.      No governance vote can exceed this limit (prevents platform capture).      Attempts to set above 90 BPS revert with FeeTooHigh error.      **Current Default:** 30 BPS (0.3%) → 3× lower than typical 0.9% crypto platforms.      **Access Control:** Only current treasury can call. No timelock, immediate effect.      Ensures treasury can respond to market conditions or protocol sustainability needs.      **Governance Philosophy:**      Fee funds protocol maintenance (audits, infrastructure, development), not profit extraction.      Treasury can lower fees as adoption scales (economies of scale).      Hard cap prevents future governance from extracting platform rents.      **Side Effects:**      - Updates feeBps state variable (affects all future collectFee() calls)      - Emits FeeUpdated event for off-chain tracking      - Existing SRPs unaffected      - No timelock delay (immediate effect on new SRPs)","params":{"newFeeBps":"New fee in basis points (0-90 BPS, enforced by MAX_FEE_BPS)"}}},"version":1},"userdoc":{"kind":"user","methods":{"acceptTreasury()":{"notice":"Accept treasury role (step 2 of 2)"},"calculateFee(uint256)":{"notice":"Calculate protocol fee for a given collateral amount"},"cancelTreasuryProposal()":{"notice":"Cancel pending treasury proposal"},"collectFee(address,uint256)":{"notice":"Collect protocol fee from caller and transfer to treasury"},"proposeTreasury(address)":{"notice":"Propose a new treasury address (step 1 of 2)"},"setFeeBps(uint256)":{"notice":"Adjust protocol fee in basis points (treasury governance)"}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/SRPFees.sol":"SRPFees"},"evmVersion":"cancun","libraries":{},"viaIR":true},"sources":{"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70","urls":["bzz-raw://0ea104e577e63faea3b69c415637e99e755dcbf64c5833d7140c35a714d6d90c","dweb:/ipfs/Qmau6x4Ns9XdyynRCNNp3RhLqijJjFm7z5fyZazfYFGYdq"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/extensions/IERC20Permit.sol":{"keccak256":"0x6008dabfe393240d73d7dd7688033f72740d570aa422254d29a7dce8568f3aff","urls":["bzz-raw://f5196ec75139918c6c7bb4251b36395e668f1fa6d206beba7e7520e74913940d","dweb:/ipfs/QmSyqjksXxmm2mCG6qRd1yuwLykypkSVBbnBnGqJRcuJMi"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol":{"keccak256":"0x37bb49513c49c87c4642a891b13b63571bc87013dde806617aa1efb54605f386","urls":["bzz-raw://b3036b3a83b7c48f96641f2a9002b9f2dcb6a5958dd670894ada21ae8229b3d0","dweb:/ipfs/QmUNfSBdoVtjhETaUJCYcaC7pTMgbhht926tJ2uXJbiVd3"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Address.sol":{"keccak256":"0xaf28a975a78550e45f65e559a3ad6a5ad43b9b8a37366999abd1b7084eb70721","urls":["bzz-raw://b7bd24e224f67f65bfadf85dc2929fa965456bb2415478bd0125471b5ce35245","dweb:/ipfs/QmRaydGr8BTHs1kvaZfsNU69pKzUAGFrvABn1KiRSbE51y"],"license":"MIT"},"src/SRPFees.sol":{"keccak256":"0xc78e50c2ebdd14ae6c6291998b26856225dc564875b8c5087d98291f16374716","urls":["bzz-raw://1c67a5772c872a3f6c33d5ee232ff37cfb24261d6c61a49f1d51f06ab13e5a60","dweb:/ipfs/QmT1qqFVSbbhGM2JjqcuZ9XHLLs3WJ4DJ9W9yqqLDLfAGA"],"license":"MIT"}},"version":1},"id":8}